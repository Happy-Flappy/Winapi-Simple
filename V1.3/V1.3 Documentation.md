# WinSimple V1.3 Documentation

## Linking
-lgdi32 
-luser32 
-lmsimg32 
-lkernel32 
-lwinmm


## Overview
WinSimple is a C++ graphics and audio library for Windows applications, providing a simple interface for window management, 2D graphics, audio playback, and user input handling.

## Namespace
```cpp
namespace ws // Win32 Simple
```

## Core Classes

### 1. Window Class
Main window management class for creating and handling application windows.

**Constructor:**
```cpp
Window(int width, int height, std::string title, DWORD style = WS_OVERLAPPEDWINDOW)
```

**Key Methods:**
- `bool isOpen()` - Checks if window is still running
- `void clear(COLORREF color = RGB(0,0,0))` - Clears the screen
- `void display()` - Displays the back buffer
- `void draw(Drawable &draw)` - Draws drawable objects
- `void setFullscreen(bool fullscreen)` - Toggles fullscreen mode
- `void toggleFullscreen()` - Toggles fullscreen state
- `bool getFullscreen() const` - Returns fullscreen status
- `void setView(View &v)` - Sets the viewport
- `bool pollEvent(MSG &message)` - Polls for window events
- `void setChromaKey(COLORREF color, BYTE alphaValue = 255, std::string type = "modern")` - Sets transparency

### 2. View Class
Manages 2D viewport transformations for scrolling and zooming.

**Key Methods:**
- `void setRect(RECT viewRect)` - Sets world rectangle
- `void setSize(POINT size)` - Sets world size
- `void setPos(POINT pos)` - Sets world position
- `void setPortRect(RECT portRect)` - Sets viewport rectangle
- `void setPortSize(POINT size)` - Sets viewport size
- `void setPortPos(POINT pos)` - Sets viewport position
- `void zoom(float factor)` - Zooms the view
- `void move(POINT delta)` - Moves the view
- `POINT toWorld(POINT pos)` - Converts screen to world coordinates
- `POINT toWindow(POINT pos)` - Converts world to screen coordinates

### 3. Drawable Base Class
Abstract base class for all drawable objects.

**Properties:**
- `int x, y, z` - Position
- `int width, height` - Dimensions
- `Vec2f scale` - Scale factor

**Methods:**
- `void setScale(Vec2f s)` - Sets scale
- `void setOrigin(POINT pos)` - Sets origin point
- `int getScaledWidth()` - Gets scaled width
- `int getScaledHeight()` - Gets scaled height
- `POINT getScaledOrigin()` - Gets scaled origin

### 4. Sprite Class
Draws textured rectangles with optional transparency.

**Constructor:**
```cpp
Sprite()
```

**Key Methods:**
- `void setTexture(Texture &texture)` - Sets texture
- `void setTextureRect(RECT r)` - Sets texture rectangle
- `RECT getTextureRect()` - Gets texture rectangle
- `Texture &getTexture()` - Gets texture reference
- `bool hasTexture() const` - Checks if has texture

### 5. Shape Class
Draws colored rectangles.

**Properties:**
- `COLORREF color` - Fill color (default: RGB(125,255,255))

**Constructor:**
```cpp
Shape()`
```

### 6. Line Class
Draws lines with customizable color and width.

**Constructor:**
```cpp
Line(POINT start = {0,0}, POINT end = {0,0}, int width = 2, COLORREF color = RGB(0,0,255))
```

**Key Methods:**
- `bool intersects(Line &otherLine)` - Checks line intersection
- `bool onSegment(POINT p, POINT q, POINT r)` - Point on segment check
- `int orientation(POINT p, POINT q, POINT r)` - Gets orientation

### 7. Poly Class
Draws polygons with fill and border.

**Constructor:**
```cpp
Poly(std::vector<POINT>& vertices, COLORREF fillColor = RGB(255,0,0), COLORREF borderColor = RGB(0,0,0), int borderWidth = 2, bool filled = true)
```

**Key Methods:**
- `void addVertex(POINT vertex)` - Adds vertex
- `void addVertex(int x, int y)` - Adds vertex
- `void clear()` - Clears vertices
- `size_t vertexCount()` - Gets vertex count
- `bool isValid()` - Checks if polygon is valid
- `POINT getCentroid()` - Gets center point
- `bool contains(POINT point)` - Point in polygon check
- `bool intersects(Line &line)` - Line intersection
- `bool intersects(Poly &other)` - Polygon intersection
- `RECT getBoundingRect()` - Gets bounding rectangle

### 8. Radial Class
Draws circles using polygon approximation.

**Constructor:**
```cpp
Radial()`
```

**Key Methods:**
- `void make(int points = 500)` - Generates circle
- `void setPosition(int posx, int posy)` - Sets position
- `void setPosition(POINT pos)` - Sets position
- `void move(POINT delta)` - Moves circle
- `void move(int deltaX, int deltaY)` - Moves circle
- `void setPointCount(int count)` - Sets vertex count
- `void setRadius(int size)` - Sets radius
- `void setFillColor(COLORREF color)` - Sets fill color
- `void setBorderColor(COLORREF color)` - Sets border color
- `void setBorderWidth(int size)` - Sets border width
- `int getRadius()` - Gets radius
- `POINT getPosition()` - Gets position
- `int getPointCount()` - Gets vertex count

### 9. Texture Class
Loads and manages bitmap images.

**Constructor:**
```cpp
Texture()
Texture(std::string path)
```

**Key Methods:**
- `bool load(std::string path)` - Loads image from file
- `bool isValid() const` - Checks if texture is valid
- `void setTransparentMask(COLORREF color)` - Sets transparency color
- `COLORREF getPixel(int Xindex, int Yindex)` - Gets pixel color
- `bool setPixel(COLORREF color, int Xindex, int Yindex)` - Sets pixel color

### 10. PixelArray Class
In-memory pixel buffer for image manipulation.

**Constructor:**
```cpp
PixelArray()
```

**Key Methods:**
- `void clear()` - Clears pixel data
- `bool create(int w, int h)` - Creates pixel buffer
- `bool convertToPixel(Texture &texture)` - Converts from texture
- `bool sendToTexture(Texture &texture)` - Converts to texture
- `void setPixel(COLORREF color, int x, int y)` - Sets pixel
- `COLORREF getPixel(int x, int y)` - Gets pixel
- `bool setMask(COLORREF startColor, COLORREF endColor)` - Color replacement

### 11. Timer Class
High-precision timer for measuring elapsed time.

**Constructor:**
```cpp
Timer()
```

**Key Methods:**
- `double restart()` - Restarts timer and returns elapsed time
- `double getSeconds() const` - Gets elapsed seconds
- `double getMilliSeconds() const` - Gets elapsed milliseconds
- `double getMicroSeconds() const` - Gets elapsed microseconds

### 12. Wav Class
Audio playback for sound files.

**Constructor:**
```cpp
Wav(std::string path = "", int channel = 0, bool blocking = true)
```

**Static Methods:**
- `static int getFreeChannel()` - Gets available channel
- `static std::string getChannelStatus(int m_channel)` - Gets channel status
- `static bool PlayFree(std::string m_path, int m_channel, bool m_blocking = false)` - Plays sound on free channel
- `static void stop(int m_channel)` - Stops channel

**Instance Methods:**
- `bool open(std::string m_path, int m_channel, bool m_blocking = true)` - Opens audio file
- `void play()` - Plays loaded audio
- `void stop()` - Pauses audio
- `bool setVolume(int percent)` - Sets volume (0-100)
- `int getVolume()` - Gets current volume
- `bool setProgress(long seconds)` - Seeks to position
- `long getProgress()` - Gets current position in seconds
- `long getLength()` - Gets audio duration in seconds
- `bool isFinished()` - Checks if playback finished

## Vector Structures

### Vec2d
```cpp
struct Vec2d {
    double x, y;
};
```

### Vec2f
```cpp
struct Vec2f {
    float x, y;
};
```

### Vec3d
```cpp
struct Vec3d {
    double x, y, z;
};
```

### Vec3f
```cpp
struct Vec3f {
    float x, y, z;
};
```

## Rectangle Structures

### IntRect
```cpp
struct IntRect {
    int left, top, width, height;
};
```

### FloatRect
```cpp
struct FloatRect {
    float left, top, width, height;
};
```

### DoubleRect
```cpp
struct DoubleRect {
    double left, top, width, height;
};
```

## Global Functions

### Mouse Functions
```cpp
POINT getMousePos(Window &window)   // Gets mouse position in world coordinates
POINT getMousePos()                 // Gets mouse position in screen coordinates
bool getMouseButton(int vmButton)   // Checks mouse button state
```

### Keyboard Functions
```cpp
bool getKey(char vmKey)             // Checks key state
```

## String Conversion Functions

```cpp
std::wstring WIDE(std::string str)              // UTF-8 to wide string
std::string SHORT(const std::wstring& wstr)     // Wide string to UTF-8
LPCSTR TO_LPCSTR(std::string &str)              // String to LPCSTR
std::wstring GetShortPathNameSafe(const std::wstring& longPath)  // Short path
```

## Example Usage

```cpp
#include "WinSimple.h"

int main() {
    // Create window
    ws::Window window(800, 600, "My Game");
    
    // Create texture
    ws::Texture texture("image.bmp");
    
    // Create sprite
    ws::Sprite sprite;
    sprite.setTexture(texture);
    sprite.x = 100;
    sprite.y = 100;
    
    // Main loop
    while (window.isOpen()) {
        MSG msg;
        while (window.pollEvent(msg)) {
            // Handle events
        }
        
        // Clear screen
        window.clear();
        
        // Draw sprite
        window.draw(sprite);
        
        // Display
        window.display();
    }
    
    return 0;
}
```

## Supported Audio Formats
- WAV (always supported)
- MID/MIDI (always supported)
- MP3 (supported on modern Windows)
- WMA (supported on modern Windows)
- AU, AIFF, SND (less commonly supported)

## Window Styles
- `WS_OVERLAPPEDWINDOW` - Standard window with title bar and borders
- `WS_POPUP` - Borderless window
- Custom combinations using Windows style flags

## Key Constants (Windows Virtual Keys)
- `VK_LEFT`, `VK_RIGHT`, `VK_UP`, `VK_DOWN` - Arrow keys
- `VK_RETURN` - Enter key
- `VK_ESCAPE` - Escape key
- `VK_SPACE` - Spacebar
- `VK_LBUTTON`, `VK_RBUTTON` - Mouse buttons
- ASCII values for letter keys (e.g., 'A', 'B', 'C', etc.)

## Color Format
Colors use Windows `COLORREF` format:
```cpp
COLORREF color = RGB(red, green, blue);  // red, green, blue: 0-255
```

## Error Handling
The library provides error messages through `std::cerr` for:
- File not found errors
- Unsupported audio formats
- MCI (Media Control Interface) errors
- Invalid operations

## Thread Safety
- Window operations should be called from the main thread
- Audio operations are generally thread-safe
- Timer operations are thread-safe